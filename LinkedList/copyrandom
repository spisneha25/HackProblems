public class Solution {
    public RandomListNode copyRandomList(RandomListNode head)
    {
        HashMap<RandomListNode, RandomListNode> rm = new HashMap<RandomListNode, RandomListNode>();
        RandomListNode rh = null, th = null, t = head;
        while(t != null)
        {
            RandomListNode newn = new RandomListNode(t.label);
            newn.random = t.random;
            
            System.out.println(t.label);
            
            if(rh == null)
            {
                rh = newn;
                th = newn;
            }
            else
            {
                th.next = newn;
                th = th.next;
            }
            
            rm.put(t, newn);
            t = t.next;
        }
        
        
        th = rh;
        
        while(th != null)
        {
            th.random = rm.get(th.random);
            th = th.next;
        }
        
        return rh;

    }
}
